(function(e,a){var d=function(w,k){var o=this,j=w.find("img").eq(0),E=0,D=100,v=100,C=0,B=100,u=100,r=0,p=0,n,t=new Array(),l=function(y){for(var x=0;x<t.length;x++){t[x](o,y)}},G=function(x){var y=w.offset();n={l:y.left|0,t:y.top|0};z(x);e(document).bind("mousemove",h).bind("mouseup",A);x.stopPropagation();x.preventDefault();return false},h=function(x){z(x);x.stopPropagation();x.preventDefault();return false},A=function(x){e(document).unbind("mouseup",A).unbind("mousemove",h);x.stopPropagation();x.preventDefault();return false},z=function(L){var J=L.pageX-n.l,x=L.pageY-n.t,K=w.w,y=w.h;if(J<0){J=0}else{if(J>K){J=K}}if(x<0){x=0}else{if(x>y){x=y}}I("xy",{x:((J/K)*v)+E,y:((x/y)*u)+C})},q=function(){var K=0,x=0,M=w.w,J=w.h,L=j.w,y=j.h;if(v>0){if(r==D){K=M}else{K=((r/v)*M)|0}}if(u>0){if(p==B){x=J}else{x=((p/u)*J)|0}}if(L>=M){K=(M>>1)-(L>>1)}else{K-=L>>1}if(y>=J){x=(J>>1)-(y>>1)}else{x-=y>>1}j.css({left:K+"px",top:x+"px"})},I=function(x,J,y){var N=J!==undefined;if(!N){if(x===undefined||x==null){x="xy"}switch(x.toLowerCase()){case"x":return r;case"y":return p;case"xy":default:return{x:r,y:p}}}if(y!=null&&y==o){return}var M=false,L,K;if(x==null){x="xy"}switch(x.toLowerCase()){case"x":L=J&&(J.x&&J.x|0||J|0)||0;break;case"y":K=J&&(J.y&&J.y|0||J|0)||0;break;case"xy":default:L=J&&J.x&&J.x|0||0;K=J&&J.y&&J.y|0||0;break}if(L!=null){if(L<E){L=E}else{if(L>D){L=D}}if(r!=L){r=L;M=true}}if(K!=null){if(K<C){K=C}else{if(K>B){K=B}}if(p!=K){p=K;M=true}}M&&l(y||o)},s=function(x,K){var O=K!==undefined;if(!O){if(x===undefined||x==null){x="all"}switch(x.toLowerCase()){case"minx":return E;case"maxx":return D;case"rangex":return{minX:E,maxX:D,rangeX:v};case"miny":return C;case"maxy":return B;case"rangey":return{minY:C,maxY:B,rangeY:u};case"all":default:return{minX:E,maxX:D,rangeX:v,minY:C,maxY:B,rangeY:u}}}var N=false,M,J,L,y;if(x==null){x="all"}switch(x.toLowerCase()){case"minx":M=K&&(K.minX&&K.minX|0||K|0)||0;break;case"maxx":J=K&&(K.maxX&&K.maxX|0||K|0)||0;break;case"rangex":M=K&&K.minX&&K.minX|0||0;J=K&&K.maxX&&K.maxX|0||0;break;case"miny":L=K&&(K.minY&&K.minY|0||K|0)||0;break;case"maxy":y=K&&(K.maxY&&K.maxY|0||K|0)||0;break;case"rangey":L=K&&K.minY&&K.minY|0||0;y=K&&K.maxY&&K.maxY|0||0;break;case"all":default:M=K&&K.minX&&K.minX|0||0;J=K&&K.maxX&&K.maxX|0||0;L=K&&K.minY&&K.minY|0||0;y=K&&K.maxY&&K.maxY|0||0;break}if(M!=null&&E!=M){E=M;v=D-E}if(J!=null&&D!=J){D=J;v=D-E}if(L!=null&&C!=L){C=L;u=B-C}if(y!=null&&B!=y){B=y;u=B-C}},H=function(x){if(e.isFunction(x)){t.push(x)}},m=function(y){if(!e.isFunction(y)){return}var x;while((x=e.inArray(y,t))!=-1){t.splice(x,1)}},F=function(){e(document).unbind("mouseup",A).unbind("mousemove",h);w.unbind("mousedown",G);w=null;j=null;t=null};e.extend(true,o,{val:I,range:s,bind:H,unbind:m,destroy:F});j.src=k.arrow&&k.arrow.image;j.w=k.arrow&&k.arrow.width||j.width();j.h=k.arrow&&k.arrow.height||j.height();w.w=k.map&&k.map.width||w.width();w.h=k.map&&k.map.height||w.height();w.bind("mousedown",G);H(q)},b=function(s,x,k){var p=this,q=s.find("tr.Red td.Text input").eq(0),u=s.find("tr.Green td.Text input").eq(0),h=s.find("tr.Blue td.Text input").eq(0),n=s.find("tr.Alpha td.Text input").eq(0),m=s.find("tr.Hue td.Text input").eq(0),o=s.find("tr.Saturation td.Text input").eq(0),w=s.find("tr.Value td.Text input").eq(0),r=s.find("tr.Hex td.Text input.Hex").eq(0),z=s.find("tr.Hex td.Text input.AHex").eq(0),v=function(B){if(B.target.value==""&&B.target!=r.get(0)&&(k!=null&&B.target!=k.get(0)||k==null)){return}if(!t(B)){return B}switch(B.target){case q.get(0):q.val(j(q.val(),0,255));x.val("r",q.val(),B.target);break;case u.get(0):u.val(j(u.val(),0,255));x.val("g",u.val(),B.target);break;case h.get(0):h.val(j(h.val(),0,255));x.val("b",h.val(),B.target);break;case n.get(0):n.val(j(n.val(),0,100));x.val("a",n.val(),B.target);break;case m.get(0):m.val(j(m.val(),0,360));x.val("h",m.val(),B.target);break;case o.get(0):o.val(j(o.val(),0,100));x.val("s",o.val(),B.target);break;case w.get(0):w.val(j(w.val(),0,100));x.val("v",w.val(),B.target);break;case r.get(0):r.val(r.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6));k&&k.val(r.val());x.val("hex",r.val()!=""?r.val():null,B.target);break;case k&&k.get(0):k.val(k.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,6));r.val(k.val());x.val("hex",k.val()!=""?k.val():null,B.target);break;case z.get(0):z.val(z.val().replace(/[^a-fA-F0-9]/g,"").toLowerCase().substring(0,2));x.val("a",z.val()!=null?((parseInt(z.val(),16)*100)/255):null,B.target);break}},y=function(B){if(x.val()!=null){switch(B.target){case q.get(0):q.val(x.val("r"));break;case u.get(0):u.val(x.val("g"));break;case h.get(0):h.val(x.val("b"));break;case n.get(0):n.val(x.val("a"));break;case m.get(0):m.val(x.val("h"));break;case o.get(0):o.val(x.val("s"));break;case w.get(0):w.val(x.val("v"));break;case r.get(0):case k&&k.get(0):r.val(x.val("hex"));k&&k.val(x.val("hex"));break;case z.get(0):z.val(x.val("ahex").substring(6));break}}},t=function(B){switch(B.keyCode){case 9:case 16:case 29:case 37:case 38:case 40:return false;case"c".charCodeAt():case"v".charCodeAt():if(B.ctrlKey){return false}}return true},j=function(D,C,B){if(D==""||isNaN(D)){return C}if(D>B){return B}if(D<C){return C}return D},l=function(C,B){if(B!=q.get(0)){q.val(C.val("r")!=null?C.val("r"):"")}if(B!=u.get(0)){u.val(C.val("g")!=null?C.val("g"):"")}if(B!=h.get(0)){h.val(C.val("b")!=null?C.val("b"):"")}if(B!=n.get(0)){n.val(C.val("a")!=null?C.val("a"):"")}if(B!=m.get(0)){m.val(C.val("h")!=null?C.val("h"):"")}if(B!=o.get(0)){o.val(C.val("s")!=null?C.val("s"):"")}if(B!=w.get(0)){w.val(C.val("v")!=null?C.val("v"):"")}if(B!=r.get(0)&&(k&&B!=k.get(0)||!k)){r.val(C.val("hex")!=null?C.val("hex"):"")}if(k&&B!=k.get(0)&&B!=r.get(0)){k.val(C.val("hex")!=null?C.val("hex"):"")}if(B!=z.get(0)){z.val(C.val("ahex")!=null?C.val("ahex").substring(6):"")}},A=function(){q.add(u).add(h).add(n).add(m).add(o).add(w).add(r).add(k).add(z).unbind("keyup",v).unbind("blur",y);x.unbind(l);q=null;u=null;h=null;n=null;m=null;o=null;w=null;r=null;z=null};e.extend(true,p,{destroy:A});q.add(u).add(h).add(n).add(m).add(o).add(w).add(r).add(k).add(z).bind("keyup",v).bind("blur",y);x.bind(l)};e.jPicker={List:[],Color:function(z){var q=this,j,o,t,u,n,A,x,k=new Array(),m=function(r){for(var h=0;h<k.length;h++){k[h](q,r)}},l=function(h,G,r){var F=G!==undefined;if(!F){if(h===undefined||h==null||h==""){h="all"}switch(h.toLowerCase()){case"ahex":return j!=null?g.rgbaToHex({r:j,g:o,b:t,a:u}):null;case"hex":var D=l("ahex");return D&&D.substring(0,6)||null;case"all":return j!=null?{r:j,g:o,b:t,a:u,h:n,s:A,v:x,hex:l("hex"),ahex:l("ahex")}:null;default:var D={};for(var B=0;B<h.length;B++){switch(h.charAt(B)){case"r":if(h.length==1){D=j}else{D.r=j}break;case"g":if(h.length==1){D=o}else{D.g=o}break;case"b":if(h.length==1){D=t}else{D.b=t}break;case"a":if(h.length==1){D=u}else{D.a=u}break;case"h":if(h.length==1){D=n}else{D.h=n}break;case"s":if(h.length==1){D=A}else{D.s=A}break;case"v":if(h.length==1){D=x}else{D.v=x}break}}return D=={}?l("all"):D;break}}if(r!=null&&r==q){return}var v=false;if(h==null){h=""}if(G==null){if(j!=null){j=null;v=true}if(o!=null){o=null;v=true}if(t!=null){t=null;v=true}if(u!=null){u=null;v=true}if(n!=null){n=null;v=true}if(A!=null){A=null;v=true}if(x!=null){x=null;v=true}v&&m(r||q);return}switch(h.toLowerCase()){case"ahex":case"hex":var D=g.hexToRgba(G&&(G.ahex||G.hex)||G||"00000000");l("rgba",{r:D.r,g:D.g,b:D.b,a:h=="ahex"?D.a:u!=null?u:100},r);break;default:if(G&&(G.ahex!=null||G.hex!=null)){l("ahex",G.ahex||G.hex||"00000000",r);return}var s={},E=false,C=false;if(G.r!==undefined&&!h.indexOf("r")==-1){h+="r"}if(G.g!==undefined&&!h.indexOf("g")==-1){h+="g"}if(G.b!==undefined&&!h.indexOf("b")==-1){h+="b"}if(G.a!==undefined&&!h.indexOf("a")==-1){h+="a"}if(G.h!==undefined&&!h.indexOf("h")==-1){h+="h"}if(G.s!==undefined&&!h.indexOf("s")==-1){h+="s"}if(G.v!==undefined&&!h.indexOf("v")==-1){h+="v"}for(var B=0;B<h.length;B++){switch(h.charAt(B)){case"r":if(C){continue}E=true;s.r=G&&G.r&&G.r|0||G&&G|0||0;if(s.r<0){s.r=0}else{if(s.r>255){s.r=255}}if(j!=s.r){j=s.r;v=true}break;case"g":if(C){continue}E=true;s.g=G&&G.g&&G.g|0||G&&G|0||0;if(s.g<0){s.g=0}else{if(s.g>255){s.g=255}}if(o!=s.g){o=s.g;v=true}break;case"b":if(C){continue}E=true;s.b=G&&G.b&&G.b|0||G&&G|0||0;if(s.b<0){s.b=0}else{if(s.b>255){s.b=255}}if(t!=s.b){t=s.b;v=true}break;case"a":s.a=G&&G.a!=null?G.a|0:G!=null?G|0:100;if(s.a<0){s.a=0}else{if(s.a>100){s.a=100}}if(u!=s.a){u=s.a;v=true}break;case"h":if(E){continue}C=true;s.h=G&&G.h&&G.h|0||G&&G|0||0;if(s.h<0){s.h=0}else{if(s.h>360){s.h=360}}if(n!=s.h){n=s.h;v=true}break;case"s":if(E){continue}C=true;s.s=G&&G.s!=null?G.s|0:G!=null?G|0:100;if(s.s<0){s.s=0}else{if(s.s>100){s.s=100}}if(A!=s.s){A=s.s;v=true}break;case"v":if(E){continue}C=true;s.v=G&&G.v!=null?G.v|0:G!=null?G|0:100;if(s.v<0){s.v=0}else{if(s.v>100){s.v=100}}if(x!=s.v){x=s.v;v=true}break}}if(v){if(E){j=j||0;o=o||0;t=t||0;var D=g.rgbToHsv({r:j,g:o,b:t});n=D.h;A=D.s;x=D.v}else{if(C){n=n||0;A=A!=null?A:100;x=x!=null?x:100;var D=g.hsvToRgb({h:n,s:A,v:x});j=D.r;o=D.g;t=D.b}}u=u!=null?u:100;m(r||q)}break}},p=function(h){if(e.isFunction(h)){k.push(h)}},y=function(r){if(!e.isFunction(r)){return}var h;while((h=e.inArray(r,k))!=-1){k.splice(h,1)}},w=function(){k=null};e.extend(true,q,{val:l,bind:p,unbind:y,destroy:w});if(z){if(z.hex!=null){l("hex",z)}else{if(z.ahex!=null){l("ahex",z)}else{if(z.r!=null&&z.g!=null&&z.b!=null){l("rgb",z)}else{if(z.h!=null&&z.s!=null&&z.v!=null){l("hsv",z)}}}}}},ColorMethods:{hexToRgba:function(m){m=this.validateHex(m);if(m==""){return{r:null,g:null,b:null,a:null}}var l="00",k="00",h="00",j="100";if(m.length==6){m+="ff"}if(m.length>6){l=m.substring(0,2);k=m.substring(2,4);h=m.substring(4,6);j=m.substring(6,m.length)}else{if(m.length>4){l=m.substring(4,m.length);m=m.substring(0,4)}if(m.length>2){k=m.substring(2,m.length);m=m.substring(0,2)}if(m.length>0){h=m.substring(0,m.length)}}return{r:this.hexToInt(l),g:this.hexToInt(k),b:this.hexToInt(h),a:((this.hexToInt(j)*100)/255)|0}},validateHex:function(h){h=h.toLowerCase().replace(/[^a-f0-9]/g,"");if(h.length>8){h=h.substring(0,8)}return h},rgbaToHex:function(h){return this.intToHex(h.r)+this.intToHex(h.g)+this.intToHex(h.b)+this.intToHex(((h.a*255)/100)|0)},intToHex:function(j){var h=(j|0).toString(16);if(h.length==1){h=("0"+h)}return h.toLowerCase()},hexToInt:function(h){return parseInt(h,16)},rgbToHsv:function(l){var o=l.r/255,n=l.g/255,j=l.b/255,k={h:0,s:0,v:0},m=0,h=0,p;if(o>=n&&o>=j){h=o;m=n>j?j:n}else{if(n>=j&&n>=o){h=n;m=o>j?j:o}else{h=j;m=n>o?o:n}}k.v=h;k.s=h?(h-m)/h:0;if(!k.s){k.h=0}else{p=h-m;if(o==h){k.h=(n-j)/p}else{if(n==h){k.h=2+(j-o)/p}else{k.h=4+(o-n)/p}}k.h=parseInt(k.h*60);if(k.h<0){k.h+=360}}k.s=(k.s*100)|0;k.v=(k.v*100)|0;return k},hsvToRgb:function(n){var r={r:0,g:0,b:0,a:100},m=n.h,x=n.s,u=n.v;if(x==0){if(u==0){r.r=r.g=r.b=0}else{r.r=r.g=r.b=(u*255/100)|0}}else{if(m==360){m=0}m/=60;x=x/100;u=u/100;var l=m|0,o=m-l,k=u*(1-x),j=u*(1-(x*o)),w=u*(1-(x*(1-o)));switch(l){case 0:r.r=u;r.g=w;r.b=k;break;case 1:r.r=j;r.g=u;r.b=k;break;case 2:r.r=k;r.g=u;r.b=w;break;case 3:r.r=k;r.g=j;r.b=u;break;case 4:r.r=w;r.g=k;r.b=u;break;case 5:r.r=u;r.g=k;r.b=j;break}r.r=(r.r*255)|0;r.g=(r.g*255)|0;r.b=(r.b*255)|0}return r}}};var f=e.jPicker.Color,c=e.jPicker.List,g=e.jPicker.ColorMethods;e.fn.jPicker=function(j){var h=arguments;return this.each(function(){var v=this,ay=e.extend(true,{},e.fn.jPicker.defaults,j);if(e(v).get(0).nodeName.toLowerCase()=="input"){e.extend(true,ay,{window:{bindToInput:true,expandable:true,input:e(v)}});if(g.validateHex(e(v).val())){ay.color.active=new f({hex:e(v).val(),a:ay.color.active.val("a")});ay.color.current=new f({hex:e(v).val(),a:ay.color.active.val("a")})}}if(ay.window.expandable){e(v).after('<span class="jPicker"><span class="Icon"><span class="Color">&nbsp;</span><span class="Alpha">&nbsp;</span><span class="Image" title="Click To Open Color Picker">&nbsp;</span><span class="Container">&nbsp;</span></span></span>')}else{ay.window.liveUpdate=false}var Q=parseFloat(navigator.appVersion.split("MSIE")[1])<7&&document.body.filters,R=null,l=null,r=null,ax=null,av=null,au=null,P=null,O=null,N=null,M=null,L=null,K=null,C=null,U=null,az=null,I=null,H=null,ao=null,ak=null,D=null,ap=null,aj=null,X=null,ac=null,at=null,q=null,B=null,t=null,ai=function(aE){var aG=F.active,aH=n.clientPath,aD=aG.val("hex"),aF,aC;ay.color.mode=aE;switch(aE){case"h":x(l,"transparent");w(ax,0);Z(ax,100);w(av,260);Z(av,100);x(r,"transparent");w(P,0);Z(P,100);w(O,260);Z(O,100);w(N,260);Z(N,100);w(M,260);Z(M,100);w(K,260);Z(K,100);C.range("all",{minX:0,maxX:100,minY:0,maxY:100});U.range("rangeY",{minY:0,maxY:360});C.val("xy",{x:aG.val("s"),y:100-aG.val("v")},C);U.val("y",360-aG.val("h"),U);break;case"s":x(l,"transparent");w(ax,-260);w(av,-520);w(P,-260);w(O,-520);w(K,260);Z(K,100);C.range("all",{minX:0,maxX:360,minY:0,maxY:100});U.range("rangeY",{minY:0,maxY:100});C.val("xy",{x:aG.val("h"),y:100-aG.val("v")},C);U.val("y",100-aG.val("s"),U);break;case"v":x(l,"000000");w(ax,-780);w(av,260);x(r,aD);w(P,-520);w(O,260);Z(O,100);w(K,260);Z(K,100);C.range("all",{minX:0,maxX:360,minY:0,maxY:100});U.range("rangeY",{minY:0,maxY:100});C.val("xy",{x:aG.val("h"),y:100-aG.val("s")},C);U.val("y",100-aG.val("v"),U);break;case"r":aF=-1040;aC=-780;C.range("all",{minX:0,maxX:255,minY:0,maxY:255});U.range("rangeY",{minY:0,maxY:255});C.val("xy",{x:aG.val("b"),y:255-aG.val("g")},C);U.val("y",255-aG.val("r"),U);break;case"g":aF=-1560;aC=-1820;C.range("all",{minX:0,maxX:255,minY:0,maxY:255});U.range("rangeY",{minY:0,maxY:255});C.val("xy",{x:aG.val("b"),y:255-aG.val("r")},C);U.val("y",255-aG.val("g"),U);break;case"b":aF=-2080;aC=-2860;C.range("all",{minX:0,maxX:255,minY:0,maxY:255});U.range("rangeY",{minY:0,maxY:255});C.val("xy",{x:aG.val("r"),y:255-aG.val("g")},C);U.val("y",255-aG.val("b"),U);break;case"a":x(l,"transparent");w(ax,-260);w(av,-520);w(P,260);w(O,260);Z(O,100);w(K,0);Z(K,100);C.range("all",{minX:0,maxX:360,minY:0,maxY:100});U.range("rangeY",{minY:0,maxY:100});C.val("xy",{x:aG.val("h"),y:100-aG.val("v")},C);U.val("y",100-aG.val("a"),U);break;default:throw ("Invalid Mode");break}switch(aE){case"h":break;case"s":case"v":case"a":Z(ax,100);Z(P,100);w(N,260);Z(N,100);w(M,260);Z(M,100);break;case"r":case"g":case"b":x(l,"transparent");x(r,"transparent");Z(P,100);Z(ax,100);w(ax,aF);w(av,aF-260);w(P,aC-780);w(O,aC-520);w(N,aC);w(M,aC-260);w(K,260);Z(K,100);break}al(aG)},al=function(aD,aC){if(!az||!C||!U){return}if(aC==null||(aC!=U&&aC!=C)){u(aD,aC)}aB(aD);an(aD);W(aD)},y=function(aD,aC){if(!az||!C||!U){return}var aE=F.active;if(aC!=C&&aE.val()==null){return}switch(ay.color.mode){case"h":aE.val("sv",{s:aD.val("x"),v:100-aD.val("y")},aC);break;case"s":case"a":aE.val("hv",{h:aD.val("x"),v:100-aD.val("y")},aC);break;case"v":aE.val("hs",{h:aD.val("x"),s:100-aD.val("y")},aC);break;case"r":aE.val("gb",{g:255-aD.val("y"),b:aD.val("x")},aC);break;case"g":aE.val("rb",{r:255-aD.val("y"),b:aD.val("x")},aC);break;case"b":aE.val("rg",{r:aD.val("x"),g:255-aD.val("y")},aC);break}},ae=function(aD,aC){if(!az||!C||!U){return}var aE=F.active;if(aC!=U&&aE.val()==null){return}switch(ay.color.mode){case"h":aE.val("h",{h:360-aD.val("y")},aC);break;case"s":aE.val("s",{s:100-aD.val("y")},aC);break;case"v":aE.val("v",{v:100-aD.val("y")},aC);break;case"r":aE.val("r",{r:255-aD.val("y")},aC);break;case"g":aE.val("g",{g:255-aD.val("y")},aC);break;case"b":aE.val("b",{b:255-aD.val("y")},aC);break;case"a":aE.val("a",100-aD.val("y"),aC);break}},u=function(aD,aC){if(aC!=C){switch(ay.color.mode){case"h":C.val("xy",{x:aD.val("s")!=null?aD.val("s"):100,y:100-(aD.val("v")!=null?aD.val("v"):100)},aC);break;case"s":C.val("xy",{x:aD.val("h")||0,y:100-(aD.val("v")!=null?aD.val("v"):100)},aC);break;case"v":C.val("xy",{x:aD.val("h")||0,y:100-(aD.val("s")!=null?aD.val("s"):100)},aC);break;case"r":C.val("xy",{x:aD.val("b")||0,y:255-(aD.val("g")||0)},aC);break;case"g":C.val("xy",{x:aD.val("b")||0,y:255-(aD.val("r")||0)},aC);break;case"b":C.val("xy",{x:aD.val("r")||0,y:255-(aD.val("g")||0)},aC);break;case"a":C.val("xy",{x:aD.val("h")||0,y:100-(aD.val("v")||0)},aC);mapY=100-(aD.val("v")||0);break}}if(aC!=U){switch(ay.color.mode){case"h":U.val("y",360-(aD.val("h")||0),aC);break;case"s":U.val("y",100-(aD.val("s")!=null?aD.val("s"):100),aC);break;case"v":U.val("y",100-(aD.val("v")!=null?aD.val("v"):100),aC);break;case"r":U.val("y",255-(aD.val("r")||0),aC);break;case"g":U.val("y",255-(aD.val("g")||0),aC);break;case"b":U.val("y",255-(aD.val("b")||0),aC);break;case"a":U.val("y",100-(aD.val("a")!=null?aD.val("a"):100),aC);break}}},aB=function(aD){try{var aC=aD.val("hex");D.css({backgroundColor:aC&&"#"+aC||"transparent"});Z(D,aD.val("a")!=null?aD.val("a"):0)}catch(aE){}},an=function(aC){switch(ay.color.mode){case"h":x(l,new f({h:aC.val("h")||0,s:100,v:100}).val("hex"));break;case"s":case"a":Z(av,100-(aC.val("s")!=null?aC.val("s"):100));break;case"v":Z(ax,aC.val("v")!=null?aC.val("v"):100);break;case"r":Z(av,(aC.val("r")||0)/255*100);break;case"g":Z(av,(aC.val("g")||0)/255*100);break;case"b":Z(av,(aC.val("b")||0)/255*100);break}Z(au,100-(aC.val("a")!=null?aC.val("a"):0))},W=function(aF){switch(ay.color.mode){case"h":Z(L,100-(aF.val("a")!=null?aF.val("a"):0));break;case"s":var aD=new f({h:aF.val("h")||0,s:100,v:aF.val("v")!=null?aF.val("v"):100});x(r,aD.val("hex"));Z(O,100-(aF.val("v")!=null?aF.val("v"):100));Z(L,100-(aF.val("a")!=null?aF.val("a"):0));break;case"v":var aG=new f({h:aF.val("h")||0,s:aF.val("s")!=null?aF.val("s"):100,v:100});x(r,aG.val("hex"));Z(L,100-(aF.val("a")!=null?aF.val("a"):0));break;case"r":case"g":case"b":var aH=0,aE=0;if(ay.color.mode=="r"){aH=aF.val("b")||0;aE=aF.val("g")||0}else{if(ay.color.mode=="g"){aH=aF.val("b")||0;aE=aF.val("r")||0}else{if(ay.color.mode=="b"){aH=aF.val("r")||0;aE=aF.val("g")||0}}}var aC=aE>aH?aH:aE;Z(O,aH>aE?((aH-aE)/(255-aE))*100:0);Z(N,aE>aH?((aE-aH)/(255-aH))*100:0);Z(M,aC/255*100);Z(L,100-(aF.val("a")!=null?aF.val("a"):0));break;case"a":x(r,aF.val("hex")||"000000");Z(L,aF.val("a")!=null?0:100);Z(K,aF.val("a")!=null?100:0);break}},x=function(aC,aD){aC.css({backgroundColor:aD&&aD.length==6&&"#"+aD||"transparent"})},s=function(aC,aD){if(Q&&(aD.indexOf("AlphaBar.png")!=-1||aD.indexOf("Bars.png")!=-1||aD.indexOf("Maps.png")!=-1)){aC.attr("pngSrc",aD);aC.css({backgroundImage:"none",filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+aD+"', sizingMethod='scale')"})}else{aC.css({backgroundImage:"url("+aD+")"})}},w=function(aC,aD){aC.css({top:aD+"px"})},Z=function(aD,aC){aD.css({visibility:aC>0?"visible":"hidden"});if(aC>0&&aC<100){if(Q){var aE=aD.attr("pngSrc");if(aE!=null&&(aE.indexOf("AlphaBar.png")!=-1||aE.indexOf("Bars.png")!=-1||aE.indexOf("Maps.png")!=-1)){aD.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+aE+"', sizingMethod='scale') progid:DXImageTransform.Microsoft.Alpha(opacity="+aC+")"})}else{aD.css({opacity:aC/100})}}else{aD.css({opacity:aC/100})}}else{if(aC==0||aC==100){if(Q){var aE=aD.attr("pngSrc");if(aE!=null&&(aE.indexOf("AlphaBar.png")!=-1||aE.indexOf("Bars.png")!=-1||aE.indexOf("Maps.png")!=-1)){aD.css({filter:"progid:DXImageTransform.Microsoft.AlphaImageLoader(src='"+aE+"', sizingMethod='scale')"})}else{aD.css({opacity:""})}}else{aD.css({opacity:""})}}}},A=function(){F.active.val("ahex",F.current.val("ahex"))},T=function(){F.current.val("ahex",F.active.val("ahex"))},z=function(aC){ai(aC.target.value)},aa=function(){A()},p=function(){A();ad.expandable&&aq();e.isFunction(aA)&&aA(F.active,X)},m=function(){T();ad.expandable&&aq();e.isFunction(ag)&&ag(F.active,aj)},ah=function(){V()},ar=function(aE,aC){var aD=aE.val("hex");ap.css({backgroundColor:aD&&"#"+aD||"transparent"});Z(ap,aE.val("a"))},G=function(aE,aC){var aD=aE.val("hex");at.css({backgroundColor:aD&&"#"+aD||"transparent"});Z(q,100-aE.val("a"));if(ad.bindToInput){ad.input.css({backgroundColor:aD&&"#"+aD||"transparent",color:aE.val("v")>75?"#000000":"#ffffff"})}},S=function(aE){var aC=ad.element,aD=ad.page;I=parseInt(R.css("left"));H=parseInt(R.css("top"));ao=aE.pageX;ak=aE.pageY;e(document).bind("mousemove",k).bind("mouseup",o);aE.stopPropagation();aE.preventDefault();return false},k=function(aC){R.css({left:I-(ao-aC.pageX)+"px",top:H-(ak-aC.pageY)+"px"});aC.stopPropagation();aC.preventDefault();return false},o=function(aC){e(document).unbind("mousemove",k).unbind("mouseup",o);aC.stopPropagation();aC.preventDefault();return false},E=function(aC){aC.preventDefault();aC.stopPropagation();F.active.val("ahex",e(this).attr("title")||null,aC.target);return false},ag=e.isFunction(h[1])&&h[1]||null,af=e.isFunction(h[2])&&h[2]||null,aA=e.isFunction(h[3])&&h[3]||null,V=function(){if(document.all){var aC=false;for(i=0;i<c.length;i++){if(aC){c[i].icon.css({display:"none"})}if(c[i]==v){aC=true}}}F.current.val("ahex",F.active.val("ahex"));R.css({display:"block"})},aq=function(){if(document.all){var aC=false;for(i=0;i<c.length;i++){if(aC){c[i].icon.css({display:"inline-block"})}if(c[i]==v){aC=true}}}R.css({display:"none"})},am=function(){R.find("td.Radio input").unbind("click",z);ap.unbind("click",aa);X.unbind("click",p);aj.unbind("click",m);if(ad.expandable){B.unbind("click",ah);t.unbind("mousedown",S);v.icon=null}R.find(".QuickColor").unbind("click",E);l=null;r=null;ax=null;av=null;au=null;P=null;O=null;N=null;M=null;L=null;K=null;C.destroy();C=null;U.destroy();U=null;az.destroy();az=null;D=null;ap=null;aj=null;X=null;ac=null;ag=null;aA=null;af=null;R.html("");for(i=0;i<c.length;i++){if(c[i]==v){c.splice(i,1)}}},n=ay.images,ad=ay.window,ab=ay.localization,F={active:(typeof(ay.color.active)).toString().toLowerCase()=="string"?new f({ahex:ay.color.active}):new f({ahex:ay.color.active.val("ahex")}),current:(typeof(ay.color.active)).toString().toLowerCase()=="string"?new f({ahex:ay.color.active}):new f({ahex:ay.color.active.val("ahex")}),quickList:ay.color.quickList};e.extend(true,v,{commitCallback:ag,liveCallback:af,cancelCallback:aA,color:F,show:V,hide:aq,destroy:am});R=ad.expandable?e(v).next().find(".Container").eq(0):e(v);if(ad.expandable){R.css({left:ad.position.x=="left"?"-526px":ad.position.x=="center"?"-259px":ad.position.x=="right"?"0px":ad.position.x=="screenCenter"?((e(document).width()>>1)-259)-e(v).next().offset().left+"px":ad.position.x,position:"absolute",top:ad.position.y=="top"?"-350px":ad.position.y=="center"?"-158px":ad.position.y=="bottom"?"25px":ad.position.y})}if((typeof(F.active)).toString().toLowerCase()=="string"){F.active=new f({ahex:F.active})}R.html('<table class="jPicker" cellpadding="0" cellspacing="0"><tbody>'+(ad.expandable?'<tr><td class="Move" colspan="6">&nbsp;</td></tr>':"")+'<tr><td rowspan="9"><h2 class="Title">'+(ad.title||ab.text.title)+'</h2><div class="Map"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><img src="'+n.clientPath+n.colorMap.arrow.file+'" class="Arrow"/></div></td><td rowspan="9"><div class="Bar"><span class="Map1">&nbsp;</span><span class="Map2">&nbsp;</span><span class="Map3">&nbsp;</span><span class="Map4">&nbsp;</span><span class="Map5">&nbsp;</span><span class="Map6">&nbsp;</span><img src="'+n.clientPath+n.colorBar.arrow.file+'" class="Arrow"/></div></td><td colspan="3" class="Preview">'+ab.text.newColor+'<div><span class="Active" title="'+ab.tooltips.colors.newColor+'">&nbsp;</span><span class="Current" title="'+ab.tooltips.colors.currentColor+'">&nbsp;</span></div>'+ab.text.currentColor+'</td><td rowspan="9" class="Button"><input type="button" class="Ok" value="'+ab.text.ok+'" title="'+ab.tooltips.buttons.ok+'"/><input type="button" class="Cancel" value="'+ab.text.cancel+'" title="'+ab.tooltips.buttons.cancel+'"/><hr/><div class="Grid">&nbsp;</div></td></tr><tr class="Hue"><td class="Radio"><input type="radio" id="jPicker_Hue_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="h" title="'+ab.tooltips.hue.radio+'"'+(ay.color.mode=="h"?' checked="checked"':"")+'/></td><td class="Label"><label for="jPicker_Hue_'+c.length+'" title="'+ab.tooltips.hue.radio+'">H:</label></td><td class="Text"><input type="text" maxlength="3" value="'+F.active.val("h")+'" title="'+ab.tooltips.hue.textbox+'"/>&nbsp;&deg;</td></tr><tr class="Saturation"><td class="Radio"><input type="radio" id="jPicker_Saturation_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="s" title="'+ab.tooltips.saturation.radio+'"'+(ay.color.mode=="s"?' checked="checked"':"")+'/></td><td class="Label"><label for="jPicker_Saturation_'+c.length+'" title="'+ab.tooltips.saturation.radio+'">S:</label></td><td class="Text"><input type="text" maxlength="3" value="'+F.active.val("s")+'" title="'+ab.tooltips.saturation.textbox+'"/>&nbsp;%</td></tr><tr class="Value"><td class="Radio"><input type="radio" id="jPicker_Value_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="v" title="'+ab.tooltips.value.radio+'"'+(ay.color.mode=="v"?' checked="checked"':"")+'/><br/><br/></td><td class="Label"><label for="jPicker_Value_'+c.length+'" title="'+ab.tooltips.value.radio+'">V:</label><br/><br/></td><td class="Text"><input type="text" maxlength="3" value="'+F.active.val("v")+'" title="'+ab.tooltips.value.textbox+'"/>&nbsp;%<br/><br/></td></tr><tr class="Red"><td class="Radio"><input type="radio" id="jPicker_Red_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="r" title="'+ab.tooltips.red.radio+'"'+(ay.color.mode=="r"?' checked="checked"':"")+'/></td><td class="Label"><label for="jPicker_Red_'+c.length+'" title="'+ab.tooltips.red.radio+'">R:</label></td><td class="Text"><input type="text" maxlength="3" value="'+F.active.val("r")+'" title="'+ab.tooltips.red.textbox+'"/></td></tr><tr class="Green"><td class="Radio"><input type="radio" id="jPicker_Green_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="g" title="'+ab.tooltips.green.radio+'"'+(ay.color.mode=="g"?' checked="checked"':"")+'/></td><td class="Label"><label for="jPicker_Green_'+c.length+'" title="'+ab.tooltips.green.radio+'">G:</label></td><td class="Text"><input type="text" maxlength="3" value="'+F.active.val("g")+'" title="'+ab.tooltips.green.textbox+'"/></td></tr><tr class="Blue"><td class="Radio"><input type="radio" id="jPicker_Blue_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="b" title="'+ab.tooltips.blue.radio+'"'+(ay.color.mode=="b"?' checked="checked"':"")+'/></td><td class="Label"><label for="jPicker_Blue_'+c.length+'" title="'+ab.tooltips.blue.radio+'">B:</label></td><td class="Text"><input type="text" maxlength="3" value="'+F.active.val("b")+'" title="'+ab.tooltips.blue.textbox+'"/></td></tr><tr class="Alpha"><td class="Radio">'+(ad.alphaSupport?'<input type="radio" id="jPicker_Alpha_'+c.length+'" name="jPicker_Mode_'+c.length+'" value="a" title="'+ab.tooltips.alpha.radio+'"'+(ay.color.mode=="a"?' checked="checked"':"")+"/>":"&nbsp;")+'</td><td class="Label">'+(ad.alphaSupport?'<label for="jPicker_Alpha_'+c.length+'" title="'+ab.tooltips.alpha.radio+'">A:</label>':"&nbsp;")+'</td><td class="Text">'+(ad.alphaSupport?'<input type="text" maxlength="3" value="'+F.active.val("a")+'" title="'+ab.tooltips.alpha.textbox+'"/>&nbsp;%':"&nbsp;")+'</td></tr><tr class="Hex"><td colspan="3" class="Text"><label for="jPicker_Hex_'+c.length+'" title="'+ab.tooltips.hex.textbox+'">#:</label><input type="text" maxlength="6" class="Hex" id="jPicker_Hex_'+c.length+'" value="'+F.active.val("hex")+'" title="'+ab.tooltips.hex.textbox+'"/>'+(ad.alphaSupport?'<input type="text" maxlength="2" class="AHex" value="'+F.active.val("ahex").substring(6)+'" title="'+ab.tooltips.hex.alpha+'"/></td>':"&nbsp;")+"</tr></tbody></table>");l=R.find(".Map").eq(0);r=R.find(".Bar").eq(0);ax=l.find(".Map1").eq(0);av=l.find(".Map2").eq(0);au=l.find(".Map3").eq(0);P=r.find(".Map1").eq(0);O=r.find(".Map2").eq(0);N=r.find(".Map3").eq(0);M=r.find(".Map4").eq(0);L=r.find(".Map5").eq(0);K=r.find(".Map6").eq(0);C=new d(l,{map:{width:n.colorMap.width,height:n.colorMap.height},arrow:{image:n.clientPath+n.colorMap.arrow.file,width:n.colorMap.arrow.width,height:n.colorMap.arrow.height}});C.bind(y);U=new d(r,{map:{width:n.colorBar.width,height:n.colorBar.height},arrow:{image:n.clientPath+n.colorBar.arrow.file,width:n.colorBar.arrow.width,height:n.colorBar.arrow.height}});U.bind(ae);az=new b(R,F.active,ad.expandable&&ad.bindToInput?ad.input:null);var Y=F.active.val("hex");D=R.find(".Preview .Active").eq(0).css({backgroundColor:Y&&"#"+Y||"transparent"});ap=R.find(".Preview .Current").eq(0).css({backgroundColor:Y&&"#"+Y||"transparent"}).bind("click",aa);aj=R.find(".Button .Ok").eq(0).bind("click",m);X=R.find(".Button .Cancel").eq(0).bind("click",p);ac=R.find(".Button .Grid").eq(0);s(ax,n.clientPath+"Maps.png");s(av,n.clientPath+"Maps.png");s(au,n.clientPath+"map-opacity.png");s(P,n.clientPath+"Bars.png");s(O,n.clientPath+"Bars.png");s(N,n.clientPath+"Bars.png");s(M,n.clientPath+"Bars.png");s(L,n.clientPath+"bar-opacity.png");s(K,n.clientPath+"AlphaBar.png");s(R.find(".Preview div").eq(0),n.clientPath+"preview-opacity.png");R.find("td.Radio input").bind("click",z);if(F.quickList&&F.quickList.length>0){ac.html("");for(i=0;i<F.quickList.length;i++){if((typeof(F.quickList[i])).toString().toLowerCase()=="string"){F.quickList[i]=new f({hex:F.quickList[i]})}var aw=F.quickList[i].val("ahex");ac.append('<span class="QuickColor" title="'+(aw&&"#"+aw||"")+'">&nbsp;</span>');var J=F.quickList[i].val("hex");R.find(".QuickColor").eq(i).css({backgroundColor:J&&"#"+J||"transparent",backgroundImage:J&&"none"||"url("+n.clientPath+"NoColor.png)"}).click(E)}}ai(ay.color.mode);F.active.bind(al);e.isFunction(af)&&F.active.bind(af);F.current.bind(ar);if(ad.expandable){v.icon=R.parents(".Icon").eq(0);at=v.icon.find(".Color").eq(0).css({backgroundColor:Y&&"#"+Y||"transparent"});q=v.icon.find(".Alpha").eq(0);s(q,n.clientPath+"bar-opacity.png");Z(q,100-F.active.val("a"));B=v.icon.find(".Image").eq(0).css({backgroundImage:"url("+n.clientPath+n.picker.file+")"}).bind("click",ah);if(ad.bindToInput){ad.input.css({backgroundColor:Y&&"#"+Y||"transparent",color:F.active.val("v")>75?"#000000":"#ffffff"})}t=R.find(".Move").eq(0).bind("mousedown",S);F.active.bind(G)}else{V()}c.push(this)})};e.fn.jPicker.defaults={window:{title:null,position:{x:"screenCenter",y:"top"},expandable:false,liveUpdate:true,alphaSupport:false},color:{mode:"h",active:new f({ahex:"#ffcc00ff"}),quickList:[new f({h:360,s:33,v:100}),new f({h:360,s:66,v:100}),new f({h:360,s:100,v:100}),new f({h:360,s:100,v:75}),new f({h:360,s:100,v:50}),new f({h:180,s:0,v:100}),new f({h:30,s:33,v:100}),new f({h:30,s:66,v:100}),new f({h:30,s:100,v:100}),new f({h:30,s:100,v:75}),new f({h:30,s:100,v:50}),new f({h:180,s:0,v:90}),new f({h:60,s:33,v:100}),new f({h:60,s:66,v:100}),new f({h:60,s:100,v:100}),new f({h:60,s:100,v:75}),new f({h:60,s:100,v:50}),new f({h:180,s:0,v:80}),new f({h:90,s:33,v:100}),new f({h:90,s:66,v:100}),new f({h:90,s:100,v:100}),new f({h:90,s:100,v:75}),new f({h:90,s:100,v:50}),new f({h:180,s:0,v:70}),new f({h:120,s:33,v:100}),new f({h:120,s:66,v:100}),new f({h:120,s:100,v:100}),new f({h:120,s:100,v:75}),new f({h:120,s:100,v:50}),new f({h:180,s:0,v:60}),new f({h:150,s:33,v:100}),new f({h:150,s:66,v:100}),new f({h:150,s:100,v:100}),new f({h:150,s:100,v:75}),new f({h:150,s:100,v:50}),new f({h:180,s:0,v:50}),new f({h:180,s:33,v:100}),new f({h:180,s:66,v:100}),new f({h:180,s:100,v:100}),new f({h:180,s:100,v:75}),new f({h:180,s:100,v:50}),new f({h:180,s:0,v:40}),new f({h:210,s:33,v:100}),new f({h:210,s:66,v:100}),new f({h:210,s:100,v:100}),new f({h:210,s:100,v:75}),new f({h:210,s:100,v:50}),new f({h:180,s:0,v:30}),new f({h:240,s:33,v:100}),new f({h:240,s:66,v:100}),new f({h:240,s:100,v:100}),new f({h:240,s:100,v:75}),new f({h:240,s:100,v:50}),new f({h:180,s:0,v:20}),new f({h:270,s:33,v:100}),new f({h:270,s:66,v:100}),new f({h:270,s:100,v:100}),new f({h:270,s:100,v:75}),new f({h:270,s:100,v:50}),new f({h:180,s:0,v:10}),new f({h:300,s:33,v:100}),new f({h:300,s:66,v:100}),new f({h:300,s:100,v:100}),new f({h:300,s:100,v:75}),new f({h:300,s:100,v:50}),new f({h:180,s:0,v:0}),new f({h:330,s:33,v:100}),new f({h:330,s:66,v:100}),new f({h:330,s:100,v:100}),new f({h:330,s:100,v:75}),new f({h:330,s:100,v:50}),new f()]},images:{clientPath:"/jPicker/images/",colorMap:{width:256,height:256,arrow:{file:"mappoint.gif",width:15,height:15}},colorBar:{width:20,height:256,arrow:{file:"rangearrows.gif",width:20,height:7}},picker:{file:"picker.gif",width:25,height:24}},localization:{text:{title:"Drag Markers To Pick A Color",newColor:"new",currentColor:"current",ok:"OK",cancel:"Cancel"},tooltips:{colors:{newColor:"New Color - Press &ldquo;OK&rdquo; To Commit",currentColor:"Click To Revert To Original Color"},buttons:{ok:"Commit To This Color Selection",cancel:"Cancel And Revert To Original Color"},hue:{radio:"Set To &ldquo;Hue&rdquo; Color Mode",textbox:"Enter A &ldquo;Hue&rdquo; Value (0-360&deg;)"},saturation:{radio:"Set To &ldquo;Saturation&rdquo; Color Mode",textbox:"Enter A &ldquo;Saturation&rdquo; Value (0-100%)"},value:{radio:"Set To &ldquo;Value&rdquo; Color Mode",textbox:"Enter A &ldquo;Value&rdquo; Value (0-100%)"},red:{radio:"Set To &ldquo;Red&rdquo; Color Mode",textbox:"Enter A &ldquo;Red&rdquo; Value (0-255)"},green:{radio:"Set To &ldquo;Green&rdquo; Color Mode",textbox:"Enter A &ldquo;Green&rdquo; Value (0-255)"},blue:{radio:"Set To &ldquo;Blue&rdquo; Color Mode",textbox:"Enter A &ldquo;Blue&rdquo; Value (0-255)"},alpha:{radio:"Set To &ldquo;Alpha&rdquo; Color Mode",textbox:"Enter A &ldquo;Alpha&rdquo; Value (0-100)"},hex:{textbox:"Enter A &ldquo;Hex&rdquo; Color Value (#000000-#ffffff)",alpha:"Enter A &ldquo;Alpha&rdquo; Value (#00-#ff)"}}}}})(jQuery,"1.1.1");